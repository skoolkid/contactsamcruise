<!DOCTYPE html>
<html>
<head>
<title>Contact Sam Cruise: Routine at 8116</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../style.css" />

</head>
<body class="load-Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="../index.html"><img alt="Contact Sam Cruise" src="../images/logo.png" /></a></td>
<td class="page-header">Load routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev"><span class="prev-1">Prev: <a href="8100.html">8100</a></span></td>
<td class="up">Up: <a href="load.html#8116">Map</a></td>
<td class="next"><span class="next-1">Next: <a href="8128.html">8128</a></span></td>
</tr>
</table>
<div class="description">8116: Copy data into addresses 817D-FFE2 (step 247)</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="4">
<div class="details">
<div class="paragraph">
Used by the routine at <a href="80BC.html">80BC</a>. Copies the 132 bytes from the data table at <a href="8128.html">8128</a> into addresses 817D-FFE2 (step 247). This is done before loading the standard speed code block because the data for those addresses is not present in that code block (except for 817D, which is present on the tape, but is not loaded).
</div>
</div>
<table class="input-1">
<tr class="asm-input-header">
<th colspan="2">Input</th>
</tr>
<tr>
<td class="register">HL</td>
<td class="register-desc">8128</td>
</tr>
<tr>
<td class="register">BC'</td>
<td class="register-desc">00F7</td>
</tr>
</table>
<table class="output-0">
<tr class="asm-output-header">
<th colspan="2">Output</th>
</tr>

</table>
</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><span id="8116"></span>8116</td>
<td class="instruction">EXX</td>
<td class="comment-11" rowspan="3">Set <span class="register">HL'</span> to the first destination address (minus 247)</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="8117"></span>8117</td>
<td class="instruction">LD HL,$8086</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="811a"></span>811A</td>
<td class="instruction">EXX</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="811b"></span>811B</td>
<td class="instruction">LD B,$84</td>
<td class="comment-11" rowspan="1">There are 132 bytes to copy</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><span id="811d"></span>811D</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-11" rowspan="1">Pick up a byte from the data table at <a href="8128.html">8128</a></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="811e"></span>811E</td>
<td class="instruction">EXX</td>
<td class="comment-11" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="811f"></span>811F</td>
<td class="instruction">ADD HL,BC</td>
<td class="comment-11" rowspan="1">Add 247 to <span class="register">HL'</span></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="8120"></span>8120</td>
<td class="instruction">LD (HL),A</td>
<td class="comment-11" rowspan="1">Copy the byte to its destination</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="8121"></span>8121</td>
<td class="instruction">EXX</td>
<td class="comment-11" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="8122"></span>8122</td>
<td class="instruction">INC L</td>
<td class="comment-11" rowspan="1">Move <span class="register">HL</span> along to the next byte in the data table</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="8123"></span>8123</td>
<td class="instruction">DJNZ $811D</td>
<td class="comment-11" rowspan="1">Jump back until all 132 bytes have been copied</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="8125"></span>8125</td>
<td class="instruction">JP <a href="802F.html">$802F</a></td>
<td class="comment-11" rowspan="1">Load the standard speed code block</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev"><span class="prev-1">Prev: <a href="8100.html">8100</a></span></td>
<td class="up">Up: <a href="load.html#8116">Map</a></td>
<td class="next"><span class="next-1">Next: <a href="8128.html">8128</a></span></td>
</tr>
</table>
<footer>
<div class="release">The complete Contact Sam Cruise RAM disassembly 20181020</div>
<div class="copyright">&#169; 1986 Microsphere Computer Services Ltd. &#169; 2018 Richard Dymond.</div>
<div class="created">Created using <a href="http://skoolkit.ca/">SkoolKit</a> 7.0.</div>
<div><a href="http://skoolkit.ca/disassemblies/contact_sam_cruise/load/33046.html">Switch to decimal</a>.</div>
</footer>
</body>
</html>