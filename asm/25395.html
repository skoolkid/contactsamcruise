<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Contact Sam Cruise: Data at 25395</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />
<link rel="stylesheet" type="text/css" href="../csc.css" />

</head>
<body class="Asm-b">
<table class="header">
<tr>
<td class="logo"><a class="link" href="../index.html"><img alt="Contact Sam Cruise" src="../images/logo.png" /></a></td>
<td class="page-header">Data</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev"><span class="prev-1">Prev: <a class="link" href="25394.html">25394</a></span></td>
<td class="up">Up: <a class="link" href="../maps/all.html#25395">Map</a></td>
<td class="next"><span class="next-1">Next: <a class="link" href="25420.html">25420</a></span></td>
</tr>
</table>
<div class="description">25395: Banknote animation table</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="4">
<div class="details">
<div class="paragraph">
Used by the routine at <a class="link" href="25420.html">25420</a>. This animation table contains 5 entries of 5 bytes each, which are used to determine how far up, down or to the right the banknote should move next. The algorithm used is as follows:
</div>
<div class="paragraph">
<table class="default">
<tr>
<th colspan="1" rowspan="1">Step</th>
<th colspan="1" rowspan="1">Description</th>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1">1</td>
<td class="" colspan="1" rowspan="1">Determine which entry to use based on the banknote's height above the ground</td>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1">2</td>
<td class="" colspan="1" rowspan="1">Generate a random number, R, between 0 and 255</td>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1">3</td>
<td class="" colspan="1" rowspan="1">Find the index, J, of the first byte in the entry that is greater than R (J=0-4, or 5 if there is no such byte)</td>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1">4</td>
<td class="" colspan="1" rowspan="1">Increment the banknote's x-coordinate if J&lt;=2, or leave it alone if J&gt;2</td>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1">5</td>
<td class="" colspan="1" rowspan="1">Increment the banknote's y-coordinate if J=0 or 3, decrement it if J=1 or 4, or leave it alone if J=2 or 5</td>
</tr>
</table>
</div>
<div class="paragraph">
The first entry is used when the banknote's height above the ground is -1. This can only happen when the banknote is below but adjacent to the sidewalk, having recently moved right from a spot at a height of 0 above the road. The probabilities with which the banknote's x- and y-coordinates will be adjusted are as follows:
</div>
<div class="paragraph">
<table class="default">
<tr>
<th colspan="1" rowspan="1">x</th>
<th colspan="1" rowspan="1">x+1</th>
<th colspan="1" rowspan="1">y-1</th>
<th colspan="1" rowspan="1">y</th>
<th colspan="1" rowspan="1">y+1</th>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1">1/4</td>
<td class="centre" colspan="1" rowspan="1">3/4</td>
<td class="centre" colspan="1" rowspan="1">255/256</td>
<td class="centre" colspan="1" rowspan="1">1/256</td>
<td class="centre" colspan="1" rowspan="1">0</td>
</tr>
</table>
</div>
</div>
<table class="input-0">
<tr class="asm-input-header">
<th colspan="2">Input</th>
</tr>

</table>
<table class="output-0">
<tr class="asm-output-header">
<th colspan="2">Output</th>
</tr>

</table>
</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="25395"></a>25395</td>
<td class="instruction">DEFB 0,192,192,192,255</td>
<td class="comment-11" rowspan="1">J will be 1 (with probability 3/4), 4 (63/256) or 5 (1/256)</td>
</tr>
<tr>
<td class="routine-comment" colspan="4">
<a name="25400"></a>
<div class="comments">
<div class="paragraph">
The next entry is used when the banknote's height above the ground is 0 (i.e. it is on the road or sidewalk).
</div>
<div class="paragraph">
<table class="default">
<tr>
<th colspan="1" rowspan="1">x</th>
<th colspan="1" rowspan="1">x+1</th>
<th colspan="1" rowspan="1">y-1</th>
<th colspan="1" rowspan="1">y</th>
<th colspan="1" rowspan="1">y+1</th>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1">3/16</td>
<td class="centre" colspan="1" rowspan="1">13/16</td>
<td class="centre" colspan="1" rowspan="1">7/32</td>
<td class="centre" colspan="1" rowspan="1">25/32</td>
<td class="centre" colspan="1" rowspan="1">0</td>
</tr>
</table>
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="25400"></a>25400</td>
<td class="instruction">DEFB 0,48,208,208,216</td>
<td class="comment-11" rowspan="1">J will be 1 (with probability 3/16), 2 (5/8), 4 (1/32) or 5 (5/32)</td>
</tr>
<tr>
<td class="routine-comment" colspan="4">
<a name="25405"></a>
<div class="comments">
<div class="paragraph">
The next entry is used when the banknote's height above the ground is 1.
</div>
<div class="paragraph">
<table class="default">
<tr>
<th colspan="1" rowspan="1">x</th>
<th colspan="1" rowspan="1">x+1</th>
<th colspan="1" rowspan="1">y-1</th>
<th colspan="1" rowspan="1">y</th>
<th colspan="1" rowspan="1">y+1</th>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1">3/8</td>
<td class="centre" colspan="1" rowspan="1">5/8</td>
<td class="centre" colspan="1" rowspan="1">1/8</td>
<td class="centre" colspan="1" rowspan="1">15/32</td>
<td class="centre" colspan="1" rowspan="1">13/32</td>
</tr>
</table>
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="25405"></a>25405</td>
<td class="instruction">DEFB 72,88,160,192,208</td>
<td class="comment-11" rowspan="1">J will be 0 (with probability 9/32), 1 (1/16), 2 (9/32), 3 (1/8), 4 (1/16) or 5 (3/16)</td>
</tr>
<tr>
<td class="routine-comment" colspan="4">
<a name="25410"></a>
<div class="comments">
<div class="paragraph">
The next entry is used when the banknote's height above the ground is 2.
</div>
<div class="paragraph">
<table class="default">
<tr>
<th colspan="1" rowspan="1">x</th>
<th colspan="1" rowspan="1">x+1</th>
<th colspan="1" rowspan="1">y-1</th>
<th colspan="1" rowspan="1">y</th>
<th colspan="1" rowspan="1">y+1</th>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1">3/8</td>
<td class="centre" colspan="1" rowspan="1">5/8</td>
<td class="centre" colspan="1" rowspan="1">0</td>
<td class="centre" colspan="1" rowspan="1">1/4</td>
<td class="centre" colspan="1" rowspan="1">3/4</td>
</tr>
</table>
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="25410"></a>25410</td>
<td class="instruction">DEFB 128,128,160,224,224</td>
<td class="comment-11" rowspan="1">J will be 0 (with probability 1/2), 2 (1/8), 3 (1/4) or 5 (1/8)</td>
</tr>
<tr>
<td class="routine-comment" colspan="4">
<a name="25415"></a>
<div class="comments">
<div class="paragraph">
The final entry is used when the banknote's height above the ground is 3. This can only happen when the banknote is above the road, having recently moved right from a spot at a height of 2 above the sidewalk.
</div>
<div class="paragraph">
<table class="default">
<tr>
<th colspan="1" rowspan="1">x</th>
<th colspan="1" rowspan="1">x+1</th>
<th colspan="1" rowspan="1">y-1</th>
<th colspan="1" rowspan="1">y</th>
<th colspan="1" rowspan="1">y+1</th>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1">1/4</td>
<td class="centre" colspan="1" rowspan="1">3/4</td>
<td class="centre" colspan="1" rowspan="1">0</td>
<td class="centre" colspan="1" rowspan="1">1/256</td>
<td class="centre" colspan="1" rowspan="1">255/256</td>
</tr>
</table>
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="25415"></a>25415</td>
<td class="instruction">DEFB 192,192,192,255,255</td>
<td class="comment-11" rowspan="1">J will be 0 (with probability 3/4), 3 (63/256) or 5 (1/256)</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev"><span class="prev-1">Prev: <a class="link" href="25394.html">25394</a></span></td>
<td class="up">Up: <a class="link" href="../maps/all.html#25395">Map</a></td>
<td class="next"><span class="next-1">Next: <a class="link" href="25420.html">25420</a></span></td>
</tr>
</table>
<div class="footer">
<div class="release">The complete Contact Sam Cruise RAM disassembly 20150417</div>
<div class="copyright">&#169; 1986 Microsphere Computer Services Ltd (Contact Sam Cruise). &#169; 2015 Richard Dymond (this disassembly).</div>
<div class="created">Created using <a class="link" href="http://skoolkit.ca/">SkoolKit</a> 4.3.</div>
</div>
</body>
</html>