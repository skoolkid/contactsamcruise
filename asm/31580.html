<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Contact Sam Cruise: Routine at 31580</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />
<link rel="stylesheet" type="text/css" href="../csc.css" />

</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a class="link" href="../index.html"><img alt="Contact Sam Cruise" src="../images/logo.png" /></a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev"><span class="prev-1">Prev: <a class="link" href="31578.html">31578</a></span></td>
<td class="up">Up: <a class="link" href="../maps/all.html#31580">Map</a></td>
<td class="next"><span class="next-1">Next: <a class="link" href="31594.html">31594</a></span></td>
</tr>
</table>
<div class="description">31580: Deal with a character who is standing next to the jail cell door</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="4">
<div class="details">
<div class="paragraph">
Used by the routine at <a class="link" href="60347.html">60347</a>. Deals with a character who is standing just behind the jail cell door and trying to move right. If the character is Sam, this routine prevents him from escaping from the jail cell while he's imprisoned there.
</div>
</div>
<table class="input-1">
<tr class="asm-input-header">
<th colspan="2">Input</th>
</tr>
<tr>
<td class="register">H</td>
<td class="register-desc">Character number (215-230)</td>
</tr>
</table>
<table class="output-0">
<tr class="asm-output-header">
<th colspan="2">Output</th>
</tr>

</table>
</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><a name="31580"></a>31580</td>
<td class="instruction">LD A,H</td>
<td class="comment-11" rowspan="1"><span class="register">A</span>=character number</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="31581"></a>31581</td>
<td class="instruction">CP 230</td>
<td class="comment-11" rowspan="1">Are we dealing with Sam?</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="31583"></a>31583</td>
<td class="instruction">JP NZ,<a class="link" href="60347.html#60423">60423</a></td>
<td class="comment-11" rowspan="1">Jump back into the calling routine if not (and allow the character to move right)</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="31586"></a>31586</td>
<td class="instruction">LD A,(32747)</td>
<td class="comment-11" rowspan="1">Collect the police flags from <a class="link" href="32747.html">32747</a></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="31589"></a>31589</td>
<td class="instruction">RLCA</td>
<td class="comment-11" rowspan="1">Is Sam in jail?</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="31590"></a>31590</td>
<td class="instruction">JP NC,<a class="link" href="60347.html#60423">60423</a></td>
<td class="comment-11" rowspan="1">Jump back into the calling routine if not (and allow Sam to move right)</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><a name="31593"></a>31593</td>
<td class="instruction">RET</td>
<td class="comment-11" rowspan="1"></td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev"><span class="prev-1">Prev: <a class="link" href="31578.html">31578</a></span></td>
<td class="up">Up: <a class="link" href="../maps/all.html#31580">Map</a></td>
<td class="next"><span class="next-1">Next: <a class="link" href="31594.html">31594</a></span></td>
</tr>
</table>
<div class="footer">
<div class="release">The complete Contact Sam Cruise RAM disassembly 20150417</div>
<div class="copyright">&#169; 1986 Microsphere Computer Services Ltd (Contact Sam Cruise). &#169; 2015 Richard Dymond (this disassembly).</div>
<div class="created">Created using <a class="link" href="http://skoolkit.ca/">SkoolKit</a> 4.3.</div>
</div>
</body>
</html>