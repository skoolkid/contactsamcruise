<!DOCTYPE html>
<html>
<head>
<title>Contact Sam Cruise: Routine at 61948</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../style.css" />
</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="../index.html"><img alt="Contact Sam Cruise" src="../../images/logo.png" /></a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="61923.html">61923</a>
</td>
<td class="up">Up: <a href="../maps/all.html#61948">Map</a></td>
<td class="next">
Next: <a href="62080.html">62080</a>
</td>
</tr>
</table>
<div class="description">61948: Move the characters</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
<div class="paragraph">
Called from the main loop at <a href="61483.html">61483</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="address-2"><span id="61948"></span>61948</td>
<td class="instruction">LD HL,32674</td>
<td class="comment-1" rowspan="1">The blown fuse delay counters are stored at <a href="32674.html">32674</a></td>
</tr>
<tr>
<td class="address-1"><span id="61951"></span>61951</td>
<td class="instruction">LD B,5</td>
<td class="comment-1" rowspan="5">Set <span class="register">A</span> to a non-zero value if any of the fuses are currently blown</td>
</tr>
<tr>
<td class="address-1"><span id="61953"></span>61953</td>
<td class="instruction">LD A,(HL)</td>
</tr>
<tr>
<td class="address-2"><span id="61954"></span>61954</td>
<td class="instruction">INC L</td>
</tr>
<tr>
<td class="address-1"><span id="61955"></span>61955</td>
<td class="instruction">OR (HL)</td>
</tr>
<tr>
<td class="address-1"><span id="61956"></span>61956</td>
<td class="instruction">DJNZ 61954</td>
</tr>
<tr>
<td class="address-1"><span id="61958"></span>61958</td>
<td class="instruction">LD (32692),A</td>
<td class="comment-1" rowspan="1">Store this value at <a href="32692.html">32692</a></td>
</tr>
<tr>
<td class="address-1"><span id="61961"></span>61961</td>
<td class="instruction">CALL 61967</td>
<td class="comment-1" rowspan="1">Move one character</td>
</tr>
<tr>
<td class="address-1"><span id="61964"></span>61964</td>
<td class="instruction">CALL 61967</td>
<td class="comment-1" rowspan="1">Move the next character</td>
</tr>
<tr>
<td class="address-2"><span id="61967"></span>61967</td>
<td class="instruction">LD HL,32763</td>
<td class="comment-1" rowspan="1"><a href="32763.html">32763</a> holds the number of the character just moved</td>
</tr>
<tr>
<td class="address-1"><span id="61970"></span>61970</td>
<td class="instruction">INC (HL)</td>
<td class="comment-1" rowspan="1">Increment this</td>
</tr>
<tr>
<td class="address-1"><span id="61971"></span>61971</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=number of the character to move next</td>
</tr>
<tr>
<td class="address-1"><span id="61972"></span>61972</td>
<td class="instruction">CP 230</td>
<td class="comment-1" rowspan="1">Is it Sam?</td>
</tr>
<tr>
<td class="address-1"><span id="61974"></span>61974</td>
<td class="instruction">JR NZ,61979</td>
<td class="comment-1" rowspan="1">Jump if not</td>
</tr>
<tr>
<td class="address-1"><span id="61976"></span>61976</td>
<td class="instruction">LD A,215</td>
<td class="comment-1" rowspan="1">Rewind to character 215 (we don't want to move Sam)</td>
</tr>
<tr>
<td class="address-1"><span id="61978"></span>61978</td>
<td class="instruction">LD (HL),A</td>
<td class="comment-1" rowspan="1">Store the number of the character to be moved next</td>
</tr>
<tr>
<td class="address-2"><span id="61979"></span>61979</td>
<td class="instruction">LD H,A</td>
<td class="comment-1" rowspan="1"><span class="register">H</span>=number of the character to move next (215-229)</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="61980"></span>
<div class="comments">
<div class="paragraph">
First check whether the character is immobilised by a blown fuse.
</div>
</div>
</td>
</tr>
<tr>
<td class="address-1"><span id="61980"></span>61980</td>
<td class="instruction">LD A,(32692)</td>
<td class="comment-1" rowspan="1">Collect the blown fuse indicator from <a href="32692.html">32692</a></td>
</tr>
<tr>
<td class="address-1"><span id="61983"></span>61983</td>
<td class="instruction">AND A</td>
<td class="comment-1" rowspan="1">Are any fuses currently blown?</td>
</tr>
<tr>
<td class="address-1"><span id="61984"></span>61984</td>
<td class="instruction">CALL NZ,<a href="29004.html">29004</a></td>
<td class="comment-1" rowspan="1">If so, check to see whether the character is immobilised by a blown fuse</td>
</tr>
<tr>
<td class="address-1"><span id="61987"></span>61987</td>
<td class="instruction">RET C</td>
<td class="comment-1" rowspan="1">Return if the character is immobilised</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="61988"></span>
<div class="comments">
<div class="paragraph">
Now to determine whether to move the character this time round. The answer will be yes if bit 7 of byte 3 of the character's buffer is set (indicating that he is running), or if bit 6 of byte 3 (which is flipped on each pass through this routine) is set.
</div>
</div>
</td>
</tr>
<tr>
<td class="address-1"><span id="61988"></span>61988</td>
<td class="instruction">LD L,3</td>
<td class="comment-1" rowspan="1">Point <span class="register">HL</span> at byte 3 of the character's buffer</td>
</tr>
<tr>
<td class="address-1"><span id="61990"></span>61990</td>
<td class="instruction">BIT 7,(HL)</td>
<td class="comment-1" rowspan="1">Is the character running?</td>
</tr>
<tr>
<td class="address-1"><span id="61992"></span>61992</td>
<td class="instruction">JR NZ,62001</td>
<td class="comment-1" rowspan="1">Jump if so</td>
</tr>
<tr>
<td class="address-1"><span id="61994"></span>61994</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-1" rowspan="3">Flip bit 6 of byte 3 of the character's buffer</td>
</tr>
<tr>
<td class="address-1"><span id="61995"></span>61995</td>
<td class="instruction">XOR 64</td>
</tr>
<tr>
<td class="address-1"><span id="61997"></span>61997</td>
<td class="instruction">LD (HL),A</td>
</tr>
<tr>
<td class="address-1"><span id="61998"></span>61998</td>
<td class="instruction">AND 64</td>
<td class="comment-1" rowspan="1">Is bit 6 set now?</td>
</tr>
<tr>
<td class="address-1"><span id="62000"></span>62000</td>
<td class="instruction">RET Z</td>
<td class="comment-1" rowspan="1">Return if not</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="62001"></span>
<div class="comments">
<div class="paragraph">
The character will be moved. From this point, the following steps are taken:
</div>
<div class="paragraph">
<table class="default">
<tr>
<th colspan="1" rowspan="1">Step</th>
<th colspan="1" rowspan="1">Action</th>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1">1</td>
<td class="" colspan="1" rowspan="1">If there is an uninterruptible subcommand routine address in bytes 18 and 19 of the character's buffer, jump to it</td>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1">2</td>
<td class="" colspan="1" rowspan="1">If there is a continual subcommand routine address in bytes 27 and 28 of the character's buffer - which there never is - call it (and then return to step 3)</td>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1">3</td>
<td class="" colspan="1" rowspan="1">If there is an interruptible subcommand routine address in bytes 14 and 15 of the character's buffer, jump to it</td>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1">4</td>
<td class="" colspan="1" rowspan="1">Restart the command list if bit 4 of byte 3 of the character's buffer is set (and carry on to step 5)</td>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1">5</td>
<td class="" colspan="1" rowspan="1">If there is a primary command routine address in bytes 8 and 9 of the character's buffer, jump to it</td>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1">6</td>
<td class="" colspan="1" rowspan="1">Remove any continual subcommand routine address from bytes 27 and 28 of the character's buffer</td>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1">7</td>
<td class="" colspan="1" rowspan="1">Collect the next primary command routine address from the command list, place it into bytes 8 and 9 of the character's buffer, and jump to it</td>
</tr>
</table>
</div>
<div class="paragraph">
The address of one of the following uninterruptible subcommand routines (or an entry point thereof) may be present in bytes 18 and 19 of the character's buffer:
</div>
<div class="paragraph">
<table class="default">
<tr>
<th colspan="1" rowspan="1">Address</th>
<th colspan="1" rowspan="1">Description</th>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1"><a href="31670.html">31670</a></td>
<td class="" colspan="1" rowspan="1">Control the hook while it's flying</td>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1"><a href="64005.html">64005</a></td>
<td class="" colspan="1" rowspan="1">Deal with a character who has been knocked over</td>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1"><a href="64131.html">64131</a></td>
<td class="" colspan="1" rowspan="1">Deal with a character who has nearly recovered from being knocked over</td>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1"><a href="64331.html">64331</a></td>
<td class="" colspan="1" rowspan="1">Control a character who has stepped off the roof of a building</td>
</tr>
</table>
</div>
<div class="paragraph">
The address of one of the following interruptible subcommand routines (or an entry point thereof) may be present in bytes 14 and 15 of the character's buffer:
</div>
<div class="paragraph">
<table class="default">
<tr>
<th colspan="1" rowspan="1">Address</th>
<th colspan="1" rowspan="1">Description</th>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1"><a href="25118.html">25118</a></td>
<td class="" colspan="1" rowspan="1">Control the sniper while active</td>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1"><a href="31319.html">31319</a></td>
<td class="" colspan="1" rowspan="1">Make a gangster walk up or down until Sam arrives</td>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1"><a href="62278.html">62278</a></td>
<td class="" colspan="1" rowspan="1">Control a character who is knocking on or opening a door (1)</td>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1"><a href="62297.html">62297</a></td>
<td class="" colspan="1" rowspan="1">Control a character who has knocked on a door and is waiting for an answer</td>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1"><a href="62339.html">62339</a></td>
<td class="" colspan="1" rowspan="1">Control a character who is knocking on or opening a door (3)</td>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1"><a href="62892.html">62892</a></td>
<td class="" colspan="1" rowspan="1">Guide a character up or down staircases</td>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1"><a href="62926.html">62926</a></td>
<td class="" colspan="1" rowspan="1">Guide a character across a floor to his destination</td>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1"><a href="62971.html">62971</a></td>
<td class="" colspan="1" rowspan="1">Guide a character from one spot on the sidewalk or road to another</td>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1"><a href="63209.html">63209</a></td>
<td class="" colspan="1" rowspan="1">Make a character walk up or down</td>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1"><a href="63558.html">63558</a></td>
<td class="" colspan="1" rowspan="1">Make a cat run up or down</td>
</tr>
</table>
</div>
<div class="paragraph">
The address of one of the following primary command routines (or an entry point thereof) may be present in bytes 8 and 9 of the character's buffer:
</div>
<div class="paragraph">
<table class="default">
<tr>
<th colspan="1" rowspan="1">Address</th>
<th colspan="1" rowspan="1">Description</th>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1"><a href="24925.html">24925</a></td>
<td class="" colspan="1" rowspan="1">Reset a gangster's location and restart the command list</td>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1"><a href="25081.html">25081</a></td>
<td class="" colspan="1" rowspan="1">Make the gangster at no. 15 lie in wait for Sam</td>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1"><a href="25307.html">25307</a></td>
<td class="" colspan="1" rowspan="1">Control the sniper</td>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1"><a href="25385.html">25385</a></td>
<td class="" colspan="1" rowspan="1">Make a gangster chase Sam</td>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1"><a href="25420.html">25420</a></td>
<td class="" colspan="1" rowspan="1">Control a banknote</td>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1"><a href="29354.html">29354</a></td>
<td class="" colspan="1" rowspan="1">Control a policeman (1)</td>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1"><a href="29361.html">29361</a></td>
<td class="" colspan="1" rowspan="1">Control a policeman (2)</td>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1"><a href="31338.html">31338</a></td>
<td class="" colspan="1" rowspan="1">Make a gangster walk up and down while watching for Sam</td>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1"><a href="31594.html">31594</a></td>
<td class="" colspan="1" rowspan="1">Let Sam out of jail if necessary</td>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1"><a href="59136.html#59147">59147</a></td>
<td class="" colspan="1" rowspan="1">Do nothing</td>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1"><a href="62976.html">62976</a></td>
<td class="" colspan="1" rowspan="1">Make a character go to a location</td>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1"><a href="63198.html">63198</a></td>
<td class="" colspan="1" rowspan="1">Restart the command list</td>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1"><a href="63281.html">63281</a></td>
<td class="" colspan="1" rowspan="1">Make a character drop Sam</td>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1"><a href="63304.html">63304</a></td>
<td class="" colspan="1" rowspan="1">Make a character walk up and down until somebody knocks on a door</td>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1"><a href="63423.html">63423</a></td>
<td class="" colspan="1" rowspan="1">Make a character open a door that has been knocked on</td>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1"><a href="63520.html">63520</a></td>
<td class="" colspan="1" rowspan="1">Make a character walk up and down for a while</td>
</tr>
<tr>
<td class="centre" colspan="1" rowspan="1"><a href="63530.html">63530</a></td>
<td class="" colspan="1" rowspan="1">Control a cat</td>
</tr>
</table>
</div>
</div>
</td>
</tr>
<tr>
<td class="address-2"><span id="62001"></span>62001</td>
<td class="instruction">LD L,19</td>
<td class="comment-1" rowspan="3">Is there an uninterruptible subcommand routine address in bytes 18 and 19 of the character's buffer?</td>
</tr>
<tr>
<td class="address-1"><span id="62003"></span>62003</td>
<td class="instruction">LD A,(HL)</td>
</tr>
<tr>
<td class="address-1"><span id="62004"></span>62004</td>
<td class="instruction">AND A</td>
</tr>
<tr>
<td class="address-1"><span id="62005"></span>62005</td>
<td class="instruction">JR NZ,62075</td>
<td class="comment-1" rowspan="1">Jump if so</td>
</tr>
<tr>
<td class="address-1"><span id="62007"></span>62007</td>
<td class="instruction">LD A,H</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=number of the character being moved (215-229)</td>
</tr>
<tr>
<td class="address-1"><span id="62008"></span>62008</td>
<td class="instruction">CP 222</td>
<td class="comment-1" rowspan="1">Does the character belong to one of the character groups 215-221?</td>
</tr>
<tr>
<td class="address-1"><span id="62010"></span>62010</td>
<td class="instruction">JR C,62029</td>
<td class="comment-1" rowspan="1">Jump if so</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="62012"></span>
<div class="comments">
<div class="paragraph">
We're dealing with one of the primary characters (222-229). Here we check whether there is a continual subcommand routine address in bytes 27 and 28 of the character's buffer. The answer is always no.
</div>
</div>
</td>
</tr>
<tr>
<td class="address-1"><span id="62012"></span>62012</td>
<td class="instruction">LD L,28</td>
<td class="comment-1" rowspan="3">Byte 28 is unused and always holds 0</td>
</tr>
<tr>
<td class="address-1"><span id="62014"></span>62014</td>
<td class="instruction">LD A,(HL)</td>
</tr>
<tr>
<td class="address-1"><span id="62015"></span>62015</td>
<td class="instruction">AND A</td>
</tr>
<tr>
<td class="address-1"><span id="62016"></span>62016</td>
<td class="instruction">JR Z,62029</td>
<td class="comment-1" rowspan="1">This jump is always made</td>
</tr>
<tr>
<td class="address-1"><span id="62018"></span>62018</td>
<td class="instruction">PUSH HL</td>
<td class="comment-1" rowspan="1">Save the character number</td>
</tr>
<tr>
<td class="address-1"><span id="62019"></span>62019</td>
<td class="instruction">LD BC,62028</td>
<td class="comment-1" rowspan="2">We will return to <a href="61948.html#62028">62028</a> (below) after calling the subcommand routine</td>
</tr>
<tr>
<td class="address-1"><span id="62022"></span>62022</td>
<td class="instruction">PUSH BC</td>
</tr>
<tr>
<td class="address-1"><span id="62023"></span>62023</td>
<td class="instruction">LD B,A</td>
<td class="comment-1" rowspan="3">Collect the continual subcommand routine address into <span class="register">BC</span></td>
</tr>
<tr>
<td class="address-1"><span id="62024"></span>62024</td>
<td class="instruction">DEC L</td>
</tr>
<tr>
<td class="address-1"><span id="62025"></span>62025</td>
<td class="instruction">LD C,(HL)</td>
</tr>
<tr>
<td class="address-1"><span id="62026"></span>62026</td>
<td class="instruction">PUSH BC</td>
<td class="comment-1" rowspan="1">Push it onto the stack</td>
</tr>
<tr>
<td class="address-1"><span id="62027"></span>62027</td>
<td class="instruction">RET</td>
<td class="comment-1" rowspan="1">Call the continual subcommand routine and then return to <a href="61948.html#62028">62028</a> (below)</td>
</tr>
<tr>
<td class="address-1"><span id="62028"></span>62028</td>
<td class="instruction">POP HL</td>
<td class="comment-1" rowspan="1">Restore the character number to <span class="register">H</span></td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="62029"></span>
<div class="comments">
<div class="paragraph">
This entry point is used by the routine at <a href="62080.html">62080</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="address-2"><span id="62029"></span>62029</td>
<td class="instruction">LD L,15</td>
<td class="comment-1" rowspan="3">Is there an interruptible subcommand routine address in bytes 14 and 15 of the character's buffer?</td>
</tr>
<tr>
<td class="address-1"><span id="62031"></span>62031</td>
<td class="instruction">LD A,(HL)</td>
</tr>
<tr>
<td class="address-1"><span id="62032"></span>62032</td>
<td class="instruction">AND A</td>
</tr>
<tr>
<td class="address-1"><span id="62033"></span>62033</td>
<td class="instruction">JR NZ,62075</td>
<td class="comment-1" rowspan="1">Jump if so</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="62035"></span>
<div class="comments">
<div class="paragraph">
Bit 4 of byte 3 of the character's buffer is never set, but if it were, it would mean that the character's command list should be restarted. Check bit 4 of byte 3 now.
</div>
</div>
</td>
</tr>
<tr>
<td class="address-1"><span id="62035"></span>62035</td>
<td class="instruction">LD L,3</td>
<td class="comment-1" rowspan="2">Bit 4 of byte 3 is unused and always reset</td>
</tr>
<tr>
<td class="address-1"><span id="62037"></span>62037</td>
<td class="instruction">BIT 4,(HL)</td>
</tr>
<tr>
<td class="address-1"><span id="62039"></span>62039</td>
<td class="instruction">JR Z,62055</td>
<td class="comment-1" rowspan="1">This jump is always made</td>
</tr>
<tr>
<td class="address-1"><span id="62041"></span>62041</td>
<td class="instruction">RES 4,(HL)</td>
<td class="comment-1" rowspan="1">Reset bit 4 of byte 3</td>
</tr>
<tr>
<td class="address-1"><span id="62043"></span>62043</td>
<td class="instruction">LD L,26</td>
<td class="comment-1" rowspan="5">Copy the command list address from bytes 25 and 26 of the character's buffer into bytes 23 and 24</td>
</tr>
<tr>
<td class="address-1"><span id="62045"></span>62045</td>
<td class="instruction">LD D,H</td>
</tr>
<tr>
<td class="address-1"><span id="62046"></span>62046</td>
<td class="instruction">LD E,24</td>
</tr>
<tr>
<td class="address-1"><span id="62048"></span>62048</td>
<td class="instruction">LDD</td>
</tr>
<tr>
<td class="address-1"><span id="62050"></span>62050</td>
<td class="instruction">LDD</td>
</tr>
<tr>
<td class="address-1"><span id="62052"></span>62052</td>
<td class="instruction">LD (DE),A</td>
<td class="comment-1" rowspan="1">Set byte 22 of the character's buffer (which holds the offset reached in the command list) to 0</td>
</tr>
<tr>
<td class="address-1"><span id="62053"></span>62053</td>
<td class="instruction">JR 62061</td>
<td class="comment-1" rowspan="1"></td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="62055"></span>
<div class="comments">
<div class="paragraph">
Now we look for a primary command routine address.
</div>
</div>
</td>
</tr>
<tr>
<td class="address-2"><span id="62055"></span>62055</td>
<td class="instruction">LD L,9</td>
<td class="comment-1" rowspan="3">Is there a primary command routine address in bytes 8 and 9 of the character's buffer?</td>
</tr>
<tr>
<td class="address-1"><span id="62057"></span>62057</td>
<td class="instruction">LD A,(HL)</td>
</tr>
<tr>
<td class="address-1"><span id="62058"></span>62058</td>
<td class="instruction">AND A</td>
</tr>
<tr>
<td class="address-1"><span id="62059"></span>62059</td>
<td class="instruction">JR NZ,62075</td>
<td class="comment-1" rowspan="1">Jump if so</td>
</tr>
<tr>
<td class="address-2"><span id="62061"></span>62061</td>
<td class="instruction">LD A,H</td>
<td class="comment-1" rowspan="1"><span class="register">A</span>=number of the character being moved (215-229)</td>
</tr>
<tr>
<td class="address-1"><span id="62062"></span>62062</td>
<td class="instruction">CP 222</td>
<td class="comment-1" rowspan="1">Does the character belong to one of the character groups 215-221?</td>
</tr>
<tr>
<td class="address-1"><span id="62064"></span>62064</td>
<td class="instruction">JR C,62070</td>
<td class="comment-1" rowspan="1">Jump if so</td>
</tr>
<tr>
<td class="address-1"><span id="62066"></span>62066</td>
<td class="instruction">LD L,28</td>
<td class="comment-1" rowspan="2">Remove any continual subcommand routine address from bytes 27 and 28 of the character's buffer</td>
</tr>
<tr>
<td class="address-1"><span id="62068"></span>62068</td>
<td class="instruction">LD (HL),0</td>
</tr>
<tr>
<td class="address-2"><span id="62070"></span>62070</td>
<td class="instruction">LD L,8</td>
<td class="comment-1" rowspan="2">Copy the next primary command routine address from the command list into bytes 8 and 9 of the character's buffer</td>
</tr>
<tr>
<td class="address-1"><span id="62072"></span>62072</td>
<td class="instruction">CALL <a href="61809.html">61809</a></td>
</tr>
<tr>
<td class="address-2"><span id="62075"></span>62075</td>
<td class="instruction">LD B,(HL)</td>
<td class="comment-1" rowspan="3">Copy the address of the primary command or subcommand routine into <span class="register">BC</span></td>
</tr>
<tr>
<td class="address-1"><span id="62076"></span>62076</td>
<td class="instruction">DEC L</td>
</tr>
<tr>
<td class="address-1"><span id="62077"></span>62077</td>
<td class="instruction">LD C,(HL)</td>
</tr>
<tr>
<td class="address-1"><span id="62078"></span>62078</td>
<td class="instruction">PUSH BC</td>
<td class="comment-1" rowspan="2">Make an indirect jump to the routine</td>
</tr>
<tr>
<td class="address-1"><span id="62079"></span>62079</td>
<td class="instruction">RET</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="61923.html">61923</a>
</td>
<td class="up">Up: <a href="../maps/all.html#61948">Map</a></td>
<td class="next">
Next: <a href="62080.html">62080</a>
</td>
</tr>
</table>
<footer>
<div class="release">The complete Contact Sam Cruise RAM disassembly 20191116</div>
<div class="copyright">&#169; 1986 Microsphere Computer Services Ltd. &#169; 2019 Richard Dymond.</div>
<div class="created">Created using <a href="https://skoolkit.ca">SkoolKit</a> 8.0.</div>
<div><a href="../../asm/F1FC.html">Switch to hexadecimal</a>.</div>
</footer>
</body>
</html>