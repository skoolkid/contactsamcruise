<!DOCTYPE html>
<html>
<head>
<title>Contact Sam Cruise: Routine at 63423</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../style.css" />
</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="../index.html"><img alt="Contact Sam Cruise" src="../../images/logo.png" /></a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="63409.html">63409</a>
</td>
<td class="up">Up: <a href="../maps/all.html#63423">Map</a></td>
<td class="next">
Next: <a href="63437.html">63437</a>
</td>
</tr>
</table>
<div class="description">63423: Make a character open a door that has been knocked on</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
<div class="paragraph">
Used by the command lists at <a href="64846.html">64846</a>, <a href="65059.html">65059</a>, <a href="65112.html">65112</a> and <a href="65143.html">65143</a>. Opens the door that the character is standing behind, and then rewinds the command list such that the character returns to the spot where he was walking up and down before going to answer the door.
</div>
</div>
<table class="input">
<tr class="asm-input-header">
<th colspan="2">Input</th>
</tr>
<tr>
<td class="register">H</td>
<td class="register-desc">Character number (215-229)</td>
</tr>
</table>
</td>
</tr>
<tr>
<td class="address-2"><span id="63423"></span>63423</td>
<td class="instruction">PUSH HL</td>
<td class="comment-1" rowspan="1">Save the character number briefly</td>
</tr>
<tr>
<td class="address-1"><span id="63424"></span>63424</td>
<td class="instruction">CALL <a href="62216.html#62252">62252</a></td>
<td class="comment-1" rowspan="1">Open the door</td>
</tr>
<tr>
<td class="address-1"><span id="63427"></span>63427</td>
<td class="instruction">POP HL</td>
<td class="comment-1" rowspan="1">Restore the character number to <span class="register">H</span></td>
</tr>
<tr>
<td class="address-1"><span id="63428"></span>63428</td>
<td class="instruction">LD L,22</td>
<td class="comment-1" rowspan="1">Byte 22 of the character's buffer holds the offset of the point reached in the command list</td>
</tr>
<tr>
<td class="address-1"><span id="63430"></span>63430</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-1" rowspan="3">Subtract 14 from this offset; this has the effect of sending the character back to the spot where he was walking up and down before answering the door</td>
</tr>
<tr>
<td class="address-1"><span id="63431"></span>63431</td>
<td class="instruction">SUB 14</td>
</tr>
<tr>
<td class="address-1"><span id="63433"></span>63433</td>
<td class="instruction">LD (HL),A</td>
</tr>
<tr>
<td class="address-1"><span id="63434"></span>63434</td>
<td class="instruction">JP <a href="62080.html">62080</a></td>
<td class="comment-1" rowspan="1">Terminate this primary command</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="63409.html">63409</a>
</td>
<td class="up">Up: <a href="../maps/all.html#63423">Map</a></td>
<td class="next">
Next: <a href="63437.html">63437</a>
</td>
</tr>
</table>
<footer>
<div class="release">The complete Contact Sam Cruise RAM disassembly 20191116</div>
<div class="copyright">&#169; 1986 Microsphere Computer Services Ltd. &#169; 2019 Richard Dymond.</div>
<div class="created">Created using <a href="https://skoolkit.ca">SkoolKit</a> 8.0.</div>
<div><a href="../../asm/F7BF.html">Switch to hexadecimal</a>.</div>
</footer>
</body>
</html>