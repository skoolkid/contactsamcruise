<!DOCTYPE html>
<html>
<head>
<title>Contact Sam Cruise: Routine at 28186</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../style.css" />

</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="../index.html"><img alt="Contact Sam Cruise" src="../../images/logo.png" /></a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev"><span class="prev-1">Prev: <a href="28160.html">28160</a></span></td>
<td class="up">Up: <a href="../maps/all.html#28186">Map</a></td>
<td class="next"><span class="next-1">Next: <a href="28292.html">28292</a></span></td>
</tr>
</table>
<div class="description">28186: Print a number</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
<div class="paragraph">
Used by the routines at <a href="28295.html">28295</a>, <a href="28337.html">28337</a> and <a href="28760.html">28760</a>. Computes the ASCII codes for the digits of the number in <span class="register">HL</span>, stores them in the buffer at <a href="32714.html">32714</a>, and then prints them.
</div>
</div>
<table class="input-1">
<tr class="asm-input-header">
<th colspan="2">Input</th>
</tr>
<tr>
<td class="register">DE</td>
<td class="register-desc">Display file address</td>
</tr>
<tr>
<td class="register">HL</td>
<td class="register-desc">Number to print</td>
</tr>
</table>
<table class="output-0">
<tr class="asm-output-header">
<th colspan="2">Output</th>
</tr>

</table>
</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><span id="28186"></span>28186</td>
<td class="bytes-0"></td>
<td class="instruction">PUSH DE</td>
<td class="comment-11" rowspan="1">Save the display file address</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="28187"></span>28187</td>
<td class="bytes-0"></td>
<td class="instruction">EX DE,HL</td>
<td class="comment-11" rowspan="1">Transfer the number to print to <span class="register">DE</span></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="28188"></span>28188</td>
<td class="bytes-0"></td>
<td class="instruction">LD HL,32719</td>
<td class="comment-11" rowspan="5">Fill the number string buffer at <a href="32714.html">32714</a> with space characters</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="28191"></span>28191</td>
<td class="bytes-0"></td>
<td class="instruction">LD B,5</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><span id="28193"></span>28193</td>
<td class="bytes-0"></td>
<td class="instruction">DEC L</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="28194"></span>28194</td>
<td class="bytes-0"></td>
<td class="instruction">LD (HL),32</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="28196"></span>28196</td>
<td class="bytes-0"></td>
<td class="instruction">DJNZ 28193</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="28198"></span>28198</td>
<td class="bytes-0"></td>
<td class="instruction">LD A,48</td>
<td class="comment-11" rowspan="1">48 is the ASCII code for the digit '0'</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="28200"></span>28200</td>
<td class="bytes-0"></td>
<td class="instruction">LD BC,55536</td>
<td class="comment-11" rowspan="1"><span class="register">BC</span>=-10000</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="28203"></span>28203</td>
<td class="bytes-0"></td>
<td class="instruction">EX DE,HL</td>
<td class="comment-11" rowspan="1">Transfer the number to print to <span class="register">HL</span></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="28204"></span>28204</td>
<td class="bytes-0"></td>
<td class="instruction">ADD HL,BC</td>
<td class="comment-11" rowspan="1">Is <span class="register">HL</span>&gt;=10000?</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="28205"></span>28205</td>
<td class="bytes-0"></td>
<td class="instruction">JR C,28235</td>
<td class="comment-11" rowspan="1">Jump if so to compute and store the 10000s digit</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="28207"></span>28207</td>
<td class="bytes-0"></td>
<td class="instruction">INC E</td>
<td class="comment-11" rowspan="1">Point <span class="register">DE</span> at the slot for the 1000s digit in the number string buffer</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="28208"></span>28208</td>
<td class="bytes-0"></td>
<td class="instruction">SBC HL,BC</td>
<td class="comment-11" rowspan="1">Add the 10000 back</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="28210"></span>28210</td>
<td class="bytes-0"></td>
<td class="instruction">LD BC,64536</td>
<td class="comment-11" rowspan="1"><span class="register">BC</span>=-1000</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="28213"></span>28213</td>
<td class="bytes-0"></td>
<td class="instruction">ADD HL,BC</td>
<td class="comment-11" rowspan="1">Is <span class="register">HL</span>&gt;=1000?</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="28214"></span>28214</td>
<td class="bytes-0"></td>
<td class="instruction">JR C,28248</td>
<td class="comment-11" rowspan="1">Jump if so to compute and store the 1000s digit</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="28216"></span>28216</td>
<td class="bytes-0"></td>
<td class="instruction">INC E</td>
<td class="comment-11" rowspan="1">Point <span class="register">DE</span> at the slot for the 100s digit in the number string buffer</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="28217"></span>28217</td>
<td class="bytes-0"></td>
<td class="instruction">SBC HL,BC</td>
<td class="comment-11" rowspan="1">Add the 1000 back</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="28219"></span>28219</td>
<td class="bytes-0"></td>
<td class="instruction">LD BC,65436</td>
<td class="comment-11" rowspan="1"><span class="register">BC</span>=-100</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="28222"></span>28222</td>
<td class="bytes-0"></td>
<td class="instruction">ADD HL,BC</td>
<td class="comment-11" rowspan="1">Is <span class="register">HL</span>&gt;=100?</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="28223"></span>28223</td>
<td class="bytes-0"></td>
<td class="instruction">JR C,28261</td>
<td class="comment-11" rowspan="1">Jump if so to compute and store the 100s digit</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="28225"></span>28225</td>
<td class="bytes-0"></td>
<td class="instruction">INC E</td>
<td class="comment-11" rowspan="1">Point <span class="register">DE</span> at the slot for the 10s digit in the number string buffer</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="28226"></span>28226</td>
<td class="bytes-0"></td>
<td class="instruction">SBC HL,BC</td>
<td class="comment-11" rowspan="1">Add the 100 back</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="28228"></span>28228</td>
<td class="bytes-0"></td>
<td class="instruction">LD C,246</td>
<td class="comment-11" rowspan="1"><span class="register">BC</span>=-10</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="28230"></span>28230</td>
<td class="bytes-0"></td>
<td class="instruction">ADD HL,BC</td>
<td class="comment-11" rowspan="1">Is <span class="register">HL</span>&gt;=10?</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="28231"></span>28231</td>
<td class="bytes-0"></td>
<td class="instruction">JR C,28273</td>
<td class="comment-11" rowspan="1">Jump if so to compute and store the 10s digit</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="28233"></span>28233</td>
<td class="bytes-0"></td>
<td class="instruction">JR 28280</td>
<td class="comment-11" rowspan="1">Jump forward to compute and store the units digit</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="28235"></span>
<div class="comments">
<div class="paragraph">
Compute and store the 10000s digit.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><span id="28235"></span>28235</td>
<td class="bytes-0"></td>
<td class="instruction">INC A</td>
<td class="comment-11" rowspan="3">Get the ASCII code for the 10000s digit in <span class="register">A</span></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="28236"></span>28236</td>
<td class="bytes-0"></td>
<td class="instruction">ADD HL,BC</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="28237"></span>28237</td>
<td class="bytes-0"></td>
<td class="instruction">JR C,28235</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="28239"></span>28239</td>
<td class="bytes-0"></td>
<td class="instruction">LD (DE),A</td>
<td class="comment-11" rowspan="1">Place the 10000s digit into the number string buffer</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="28240"></span>28240</td>
<td class="bytes-0"></td>
<td class="instruction">SBC HL,BC</td>
<td class="comment-11" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="28242"></span>28242</td>
<td class="bytes-0"></td>
<td class="instruction">INC E</td>
<td class="comment-11" rowspan="1">Point <span class="register">DE</span> at the slot for the 1000s digit</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="28243"></span>28243</td>
<td class="bytes-0"></td>
<td class="instruction">LD A,47</td>
<td class="comment-11" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="28245"></span>28245</td>
<td class="bytes-0"></td>
<td class="instruction">LD BC,64536</td>
<td class="comment-11" rowspan="1"><span class="register">BC</span>=-1000</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="28248"></span>
<div class="comments">
<div class="paragraph">
Compute and store the 1000s digit.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><span id="28248"></span>28248</td>
<td class="bytes-0"></td>
<td class="instruction">INC A</td>
<td class="comment-11" rowspan="3">Get the ASCII code for the 1000s digit in <span class="register">A</span></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="28249"></span>28249</td>
<td class="bytes-0"></td>
<td class="instruction">ADD HL,BC</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="28250"></span>28250</td>
<td class="bytes-0"></td>
<td class="instruction">JR C,28248</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="28252"></span>28252</td>
<td class="bytes-0"></td>
<td class="instruction">LD (DE),A</td>
<td class="comment-11" rowspan="1">Place the 1000s digit into the number string buffer</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="28253"></span>28253</td>
<td class="bytes-0"></td>
<td class="instruction">LD A,47</td>
<td class="comment-11" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="28255"></span>28255</td>
<td class="bytes-0"></td>
<td class="instruction">SBC HL,BC</td>
<td class="comment-11" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="28257"></span>28257</td>
<td class="bytes-0"></td>
<td class="instruction">LD BC,65436</td>
<td class="comment-11" rowspan="1"><span class="register">BC</span>=-100</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="28260"></span>28260</td>
<td class="bytes-0"></td>
<td class="instruction">INC E</td>
<td class="comment-11" rowspan="1">Point <span class="register">DE</span> at the slot for the 100s digit</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="28261"></span>
<div class="comments">
<div class="paragraph">
Compute and store the 100s digit.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><span id="28261"></span>28261</td>
<td class="bytes-0"></td>
<td class="instruction">INC A</td>
<td class="comment-11" rowspan="3">Get the ASCII code for the 100s digit in <span class="register">A</span></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="28262"></span>28262</td>
<td class="bytes-0"></td>
<td class="instruction">ADD HL,BC</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="28263"></span>28263</td>
<td class="bytes-0"></td>
<td class="instruction">JR C,28261</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="28265"></span>28265</td>
<td class="bytes-0"></td>
<td class="instruction">LD (DE),A</td>
<td class="comment-11" rowspan="1">Place the 100s digit into the number string buffer</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="28266"></span>28266</td>
<td class="bytes-0"></td>
<td class="instruction">LD A,47</td>
<td class="comment-11" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="28268"></span>28268</td>
<td class="bytes-0"></td>
<td class="instruction">SBC HL,BC</td>
<td class="comment-11" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="28270"></span>28270</td>
<td class="bytes-0"></td>
<td class="instruction">LD C,246</td>
<td class="comment-11" rowspan="1"><span class="register">BC</span>=-10</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="28272"></span>28272</td>
<td class="bytes-0"></td>
<td class="instruction">INC E</td>
<td class="comment-11" rowspan="1">Point <span class="register">DE</span> at the slot for the 10s digit</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="28273"></span>
<div class="comments">
<div class="paragraph">
Compute and store the 10s digit.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><span id="28273"></span>28273</td>
<td class="bytes-0"></td>
<td class="instruction">INC A</td>
<td class="comment-11" rowspan="3">Get the ASCII code for the 10s digit in <span class="register">A</span></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="28274"></span>28274</td>
<td class="bytes-0"></td>
<td class="instruction">ADD HL,BC</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="28275"></span>28275</td>
<td class="bytes-0"></td>
<td class="instruction">JR C,28273</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="28277"></span>28277</td>
<td class="bytes-0"></td>
<td class="instruction">LD (DE),A</td>
<td class="comment-11" rowspan="1">Place the 10s digit into the number string buffer</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="28278"></span>28278</td>
<td class="bytes-0"></td>
<td class="instruction">LD A,48</td>
<td class="comment-11" rowspan="1"></td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="28280"></span>
<div class="comments">
<div class="paragraph">
Compute and store the units digit.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><span id="28280"></span>28280</td>
<td class="bytes-0"></td>
<td class="instruction">SBC HL,BC</td>
<td class="comment-11" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="28282"></span>28282</td>
<td class="bytes-0"></td>
<td class="instruction">INC E</td>
<td class="comment-11" rowspan="1">Point <span class="register">DE</span> at the slot for the units digit</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="28283"></span>28283</td>
<td class="bytes-0"></td>
<td class="instruction">ADD A,L</td>
<td class="comment-11" rowspan="1"><span class="register">A</span>=ASCII code for the units digit</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="28284"></span>28284</td>
<td class="bytes-0"></td>
<td class="instruction">LD (DE),A</td>
<td class="comment-11" rowspan="1">Place it into the number string buffer</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="28285"></span>
<div class="comments">
<div class="paragraph">
The number string buffer is now ready.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="28285"></span>28285</td>
<td class="bytes-0"></td>
<td class="instruction">LD E,202</td>
<td class="comment-11" rowspan="1"><span class="register">DE</span>=<a href="32714.html">32714</a> (start of the number string buffer)</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="28287"></span>28287</td>
<td class="bytes-0"></td>
<td class="instruction">POP HL</td>
<td class="comment-11" rowspan="1">Restore the display file address to <span class="register">HL</span></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="28288"></span>28288</td>
<td class="bytes-0"></td>
<td class="instruction">EX DE,HL</td>
<td class="comment-11" rowspan="1">Transfer it to <span class="register">DE</span>, and point <span class="register">HL</span> at the number string buffer at <a href="32714.html">32714</a></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="28289"></span>28289</td>
<td class="bytes-0"></td>
<td class="instruction">JP <a href="28160.html">28160</a></td>
<td class="comment-11" rowspan="1">Print the number</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev"><span class="prev-1">Prev: <a href="28160.html">28160</a></span></td>
<td class="up">Up: <a href="../maps/all.html#28186">Map</a></td>
<td class="next"><span class="next-1">Next: <a href="28292.html">28292</a></span></td>
</tr>
</table>
<footer>
<div class="release">The complete Contact Sam Cruise RAM disassembly 20190619</div>
<div class="copyright">&#169; 1986 Microsphere Computer Services Ltd. &#169; 2019 Richard Dymond.</div>
<div class="created">Created using <a href="https://skoolkit.ca">SkoolKit</a> 7.2.</div>
<div><a href="../../asm/6E1A.html">Switch to hexadecimal</a>.</div>
</footer>
</body>
</html>