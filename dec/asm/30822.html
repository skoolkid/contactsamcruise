<!DOCTYPE html>
<html>
<head>
<title>Contact Sam Cruise: Routine at 30822</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../style.css" />

</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="../index.html"><img alt="Contact Sam Cruise" src="../../images/logo.png" /></a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev"><span class="prev-1">Prev: <a href="30675.html">30675</a></span></td>
<td class="up">Up: <a href="../maps/all.html#30822">Map</a></td>
<td class="next"><span class="next-1">Next: <a href="30969.html">30969</a></span></td>
</tr>
</table>
<div class="description">30822: Prepare for a cutscene</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
<div class="paragraph">
Used by the routine at <a href="31414.html">31414</a>. On entry, <span class="register">A</span> holds the LSB of the address of the <a href="32512.html">screen refresh buffer</a> byte that corresponds to the top row of the portion of the play area to be displayed during the cutscene.
</div>
</div>
<table class="input-1">
<tr class="asm-input-header">
<th colspan="2">Input</th>
</tr>
<tr>
<td class="register">A</td>
<td class="register-desc">Screen refresh buffer address LSB</td>
</tr>
<tr>
<td class="register">D</td>
<td class="register-desc">New y-coordinate for the topmost row of the play area on screen</td>
</tr>
<tr>
<td class="register">E</td>
<td class="register-desc">New x-coordinate for the leftmost column of the play area on screen</td>
</tr>
</table>
<table class="output-0">
<tr class="asm-output-header">
<th colspan="2">Output</th>
</tr>

</table>
</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><span id="30822"></span>30822</td>
<td class="bytes-0"></td>
<td class="instruction">PUSH DE</td>
<td class="comment-11" rowspan="1">Save the play area coordinates briefly</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30823"></span>30823</td>
<td class="bytes-0"></td>
<td class="instruction">PUSH AF</td>
<td class="comment-11" rowspan="1">Save the screen refresh buffer address LSB briefly</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30824"></span>30824</td>
<td class="bytes-0"></td>
<td class="instruction">CALL <a href="64599.html">64599</a></td>
<td class="comment-11" rowspan="1">Hide the play area</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30827"></span>30827</td>
<td class="bytes-0"></td>
<td class="instruction">POP AF</td>
<td class="comment-11" rowspan="1">Restore the screen refresh buffer address LSB to <span class="register">A</span></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30828"></span>30828</td>
<td class="bytes-0"></td>
<td class="instruction">LD L,A</td>
<td class="comment-11" rowspan="1">Point <span class="register">HL</span> at the first <a href="32512.html">screen refresh buffer</a> (SRB) byte that will need updating later</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30829"></span>30829</td>
<td class="bytes-0"></td>
<td class="instruction">POP DE</td>
<td class="comment-11" rowspan="1">Restore the play area coordinates to <span class="register">DE</span></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30830"></span>30830</td>
<td class="bytes-0"></td>
<td class="instruction">PUSH HL</td>
<td class="comment-11" rowspan="1">Save the SRB address for now</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30831"></span>30831</td>
<td class="bytes-0"></td>
<td class="instruction">AND 3</td>
<td class="comment-11" rowspan="6">Compute Sam's new x-coordinate (x+5, where x is the x-coordinate of the leftmost column of the portion of the play area to be displayed)</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30833"></span>30833</td>
<td class="bytes-0"></td>
<td class="instruction">ADD A,A</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30834"></span>30834</td>
<td class="bytes-0"></td>
<td class="instruction">ADD A,A</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30835"></span>30835</td>
<td class="bytes-0"></td>
<td class="instruction">ADD A,A</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30836"></span>30836</td>
<td class="bytes-0"></td>
<td class="instruction">ADD A,5</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30838"></span>30838</td>
<td class="bytes-0"></td>
<td class="instruction">ADD A,E</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30839"></span>30839</td>
<td class="bytes-0"></td>
<td class="instruction">LD C,A</td>
<td class="comment-11" rowspan="1"><span class="register">C</span>=Sam's new x-coordinate</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30840"></span>30840</td>
<td class="bytes-0"></td>
<td class="instruction">LD A,D</td>
<td class="comment-11" rowspan="2">Set the new y-coordinate of the topmost row of the play area on screen</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30841"></span>30841</td>
<td class="bytes-0"></td>
<td class="instruction">LD (32767),A</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30844"></span>30844</td>
<td class="bytes-0"></td>
<td class="instruction">LD A,L</td>
<td class="comment-11" rowspan="1"><span class="register">A</span>=screen refresh buffer address LSB</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30845"></span>30845</td>
<td class="bytes-0"></td>
<td class="instruction">SUB 12</td>
<td class="comment-11" rowspan="5">Compute Sam's new y-coordinate</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30847"></span>30847</td>
<td class="bytes-0"></td>
<td class="instruction">AND 252</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30849"></span>30849</td>
<td class="bytes-0"></td>
<td class="instruction">RRCA</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30850"></span>30850</td>
<td class="bytes-0"></td>
<td class="instruction">RRCA</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30851"></span>30851</td>
<td class="bytes-0"></td>
<td class="instruction">ADD A,D</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30852"></span>30852</td>
<td class="bytes-0"></td>
<td class="instruction">LD HL,58880</td>
<td class="comment-11" rowspan="1">Point <span class="register">HL</span> at byte 0 of Sam's character buffer</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30855"></span>30855</td>
<td class="bytes-0"></td>
<td class="instruction">LD (HL),0</td>
<td class="comment-11" rowspan="1">Set Sam's animatory state to <a href="../graphics/as.html#0">0</a> (standing/walking phase 1)</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30857"></span>30857</td>
<td class="bytes-0"></td>
<td class="instruction">INC L</td>
<td class="comment-11" rowspan="1"><span class="register">L</span>=1</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30858"></span>30858</td>
<td class="bytes-0"></td>
<td class="instruction">LD (HL),C</td>
<td class="comment-11" rowspan="1">Set Sam's x-coordinate</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30859"></span>30859</td>
<td class="bytes-0"></td>
<td class="instruction">INC L</td>
<td class="comment-11" rowspan="1"><span class="register">L</span>=2</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30860"></span>30860</td>
<td class="bytes-0"></td>
<td class="instruction">LD (HL),A</td>
<td class="comment-11" rowspan="1">Set Sam's y-coordinate</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30861"></span>30861</td>
<td class="bytes-0"></td>
<td class="instruction">INC L</td>
<td class="comment-11" rowspan="2"><span class="register">L</span>=4</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30862"></span>30862</td>
<td class="bytes-0"></td>
<td class="instruction">INC L</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30863"></span>30863</td>
<td class="bytes-0"></td>
<td class="instruction">LD (HL),1</td>
<td class="comment-11" rowspan="1">Set Sam's z-coordinate</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="30865"></span>
<div class="comments">
<div class="paragraph">
Next we cycle character buffer groups forwards or backwards as appropriate to correspond with the portion of the play area that will be on screen.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30865"></span>30865</td>
<td class="bytes-0"></td>
<td class="instruction">LD HL,61879</td>
<td class="comment-11" rowspan="2">Place a RET instruction at <a href="61838.html#61879">61879</a> so that the screen will not scroll right</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30868"></span>30868</td>
<td class="bytes-0"></td>
<td class="instruction">LD (HL),201</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30870"></span>30870</td>
<td class="bytes-0"></td>
<td class="instruction">LD L,224</td>
<td class="comment-11" rowspan="2">Place a RET instruction at <a href="61882.html#61920">61920</a> so that the screen will not scroll left</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30872"></span>30872</td>
<td class="bytes-0"></td>
<td class="instruction">LD (HL),201</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30874"></span>30874</td>
<td class="bytes-0"></td>
<td class="instruction">PUSH HL</td>
<td class="comment-11" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30875"></span>30875</td>
<td class="bytes-0"></td>
<td class="instruction">LD HL,32766</td>
<td class="comment-11" rowspan="2">Collect X (the x-coordinate of the leftmost column of the play area on screen) from <a href="32766.html">32766</a></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30878"></span>30878</td>
<td class="bytes-0"></td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><span id="30879"></span>30879</td>
<td class="bytes-0"></td>
<td class="instruction">CP E</td>
<td class="comment-11" rowspan="1">Does X match the target x-coordinate (in <span class="register">E</span>)?</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30880"></span>30880</td>
<td class="bytes-0"></td>
<td class="instruction">JR Z,30905</td>
<td class="comment-11" rowspan="1">Jump if so</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30882"></span>30882</td>
<td class="bytes-0"></td>
<td class="instruction">PUSH DE</td>
<td class="comment-11" rowspan="1">Save the target x-coordinate briefly</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30883"></span>30883</td>
<td class="bytes-0"></td>
<td class="instruction">JR C,30892</td>
<td class="comment-11" rowspan="1">Jump if X&lt;<span class="register">E</span></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30885"></span>30885</td>
<td class="bytes-0"></td>
<td class="instruction">CALL <a href="61838.html">61838</a></td>
<td class="comment-11" rowspan="1">Cycle a character buffer group forwards (but without scrolling the screen)</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30888"></span>30888</td>
<td class="bytes-0"></td>
<td class="instruction">LD A,248</td>
<td class="comment-11" rowspan="1"><span class="register">A</span>=-8</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30890"></span>30890</td>
<td class="bytes-0"></td>
<td class="instruction">JR 30897</td>
<td class="comment-11" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><span id="30892"></span>30892</td>
<td class="bytes-0"></td>
<td class="instruction">CALL <a href="61882.html">61882</a></td>
<td class="comment-11" rowspan="1">Cycle a character buffer group backwards (but without scrolling the screen)</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30895"></span>30895</td>
<td class="bytes-0"></td>
<td class="instruction">LD A,8</td>
<td class="comment-11" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><span id="30897"></span>30897</td>
<td class="bytes-0"></td>
<td class="instruction">POP DE</td>
<td class="comment-11" rowspan="1">Restore the target x-coordinate to <span class="register">E</span></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30898"></span>30898</td>
<td class="bytes-0"></td>
<td class="instruction">LD HL,32766</td>
<td class="comment-11" rowspan="3">Add 8 to or subtract 8 from X (the x-coordinate of the leftmost column of the play area on screen, stored at <a href="32766.html">32766</a>)</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30901"></span>30901</td>
<td class="bytes-0"></td>
<td class="instruction">ADD A,(HL)</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30902"></span>30902</td>
<td class="bytes-0"></td>
<td class="instruction">LD (HL),A</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30903"></span>30903</td>
<td class="bytes-0"></td>
<td class="instruction">JR 30879</td>
<td class="comment-11" rowspan="1">Jump back to check whether we need to cycle any more character buffers backwards or forwards</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><span id="30905"></span>30905</td>
<td class="bytes-0"></td>
<td class="instruction">POP HL</td>
<td class="comment-11" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30906"></span>30906</td>
<td class="bytes-0"></td>
<td class="instruction">LD (HL),195</td>
<td class="comment-11" rowspan="1">Restore the JP instruction at <a href="61882.html#61920">61920</a></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30908"></span>30908</td>
<td class="bytes-0"></td>
<td class="instruction">LD L,183</td>
<td class="comment-11" rowspan="2">Restore the JP instruction at <a href="61838.html#61879">61879</a></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30910"></span>30910</td>
<td class="bytes-0"></td>
<td class="instruction">LD (HL),195</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="30912"></span>
<div class="comments">
<div class="paragraph">
Next we determine whether any lights near Sam need to be switched on and any window blinds need to be raised.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30912"></span>30912</td>
<td class="bytes-0"></td>
<td class="instruction">LD H,230</td>
<td class="comment-11" rowspan="1">230=Sam</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30914"></span>30914</td>
<td class="bytes-0"></td>
<td class="instruction">CALL <a href="63138.html">63138</a></td>
<td class="comment-11" rowspan="1">Collect in <span class="register">C</span> the x-coordinate of the front column of Sam's sprite</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30917"></span>30917</td>
<td class="bytes-0"></td>
<td class="instruction">LD B,192</td>
<td class="comment-11" rowspan="2">Is there a light switch next to Sam?</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30919"></span>30919</td>
<td class="bytes-0"></td>
<td class="instruction">CALL <a href="62518.html#62548">62548</a></td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30922"></span>30922</td>
<td class="bytes-0"></td>
<td class="instruction">JR Z,30955</td>
<td class="comment-11" rowspan="1">Jump if not (we can reveal the play area now)</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30924"></span>30924</td>
<td class="bytes-0"></td>
<td class="instruction">BIT 5,A</td>
<td class="comment-11" rowspan="1">Set the zero flag if the light switch affects the light in only one window or window-pair</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30926"></span>30926</td>
<td class="bytes-0"></td>
<td class="instruction">LD A,(BC)</td>
<td class="comment-11" rowspan="1"><span class="register">A</span>=window flags for Sam's location</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30927"></span>30927</td>
<td class="bytes-0"></td>
<td class="instruction">JR Z,30936</td>
<td class="comment-11" rowspan="1">Jump if the light switch affects the light in only one window or window-pair</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30929"></span>30929</td>
<td class="bytes-0"></td>
<td class="instruction">BIT 5,A</td>
<td class="comment-11" rowspan="1">Is the light switch in the 'on' position?</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30931"></span>30931</td>
<td class="bytes-0"></td>
<td class="instruction">CALL NZ,<a href="62597.html#62630">62630</a></td>
<td class="comment-11" rowspan="1">If not, switch the light on</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30934"></span>30934</td>
<td class="bytes-0"></td>
<td class="instruction">JR 30955</td>
<td class="comment-11" rowspan="1">Jump forward to reveal the play area</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><span id="30936"></span>30936</td>
<td class="bytes-0"></td>
<td class="instruction">BIT 1,A</td>
<td class="comment-11" rowspan="1">Is there a right-hand window here with a blind?</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30938"></span>30938</td>
<td class="bytes-0"></td>
<td class="instruction">JR Z,30942</td>
<td class="comment-11" rowspan="1">Jump if not</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30940"></span>30940</td>
<td class="bytes-0"></td>
<td class="instruction">RES 0,A</td>
<td class="comment-11" rowspan="1">Reset bit 0: blind raised in the right-hand window</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><span id="30942"></span>30942</td>
<td class="bytes-0"></td>
<td class="instruction">BIT 7,A</td>
<td class="comment-11" rowspan="1">Is there a left-land or single window here with a blind?</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30944"></span>30944</td>
<td class="bytes-0"></td>
<td class="instruction">JR Z,30948</td>
<td class="comment-11" rowspan="1">Jump if not</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30946"></span>30946</td>
<td class="bytes-0"></td>
<td class="instruction">RES 6,A</td>
<td class="comment-11" rowspan="1">Reset bit 6: blind raised in the left-hand or only window</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><span id="30948"></span>30948</td>
<td class="bytes-0"></td>
<td class="instruction">RES 5,A</td>
<td class="comment-11" rowspan="1">Reset bit 5: light switch on</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30950"></span>30950</td>
<td class="bytes-0"></td>
<td class="instruction">LD (BC),A</td>
<td class="comment-11" rowspan="1">Save the new window flags (blinds raised, light switch on)</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30951"></span>30951</td>
<td class="bytes-0"></td>
<td class="instruction">XOR A</td>
<td class="comment-11" rowspan="1">Clear <span class="register">A</span> to prevent the following call from changing the window flags (we've already updated them)</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30952"></span>30952</td>
<td class="bytes-0"></td>
<td class="instruction">CALL <a href="62597.html#62617">62617</a></td>
<td class="comment-11" rowspan="1">Update the SRB for the window</td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="30955"></span>
<div class="comments">
<div class="paragraph">
Finally we can reveal the portion of the play area in which Sam will walk up and down until the cutscene message has been displayed and the game resumes.
</div>
</div>
</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><span id="30955"></span>30955</td>
<td class="bytes-0"></td>
<td class="instruction">POP HL</td>
<td class="comment-11" rowspan="1">Restore the SRB address to <span class="register">HL</span></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30956"></span>30956</td>
<td class="bytes-0"></td>
<td class="instruction">LD B,6</td>
<td class="comment-11" rowspan="1">The portion is 6 rows high</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30958"></span>30958</td>
<td class="bytes-0"></td>
<td class="instruction">LD A,L</td>
<td class="comment-11" rowspan="1">Initialise <span class="register">A</span> for the loop that follows</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-2"><span id="30959"></span>30959</td>
<td class="bytes-0"></td>
<td class="instruction">LD L,A</td>
<td class="comment-11" rowspan="4">Set all bits in the relevant SRB bytes</td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30960"></span>30960</td>
<td class="bytes-0"></td>
<td class="instruction">LD (HL),255</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30962"></span>30962</td>
<td class="bytes-0"></td>
<td class="instruction">ADD A,4</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30964"></span>30964</td>
<td class="bytes-0"></td>
<td class="instruction">DJNZ 30959</td>
<td class="comment-01" rowspan="1"></td>
</tr>
<tr>
<td class="asm-label-0"></td>
<td class="address-1"><span id="30966"></span>30966</td>
<td class="bytes-0"></td>
<td class="instruction">JP <a href="60032.html">60032</a></td>
<td class="comment-11" rowspan="1">Update the display</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev"><span class="prev-1">Prev: <a href="30675.html">30675</a></span></td>
<td class="up">Up: <a href="../maps/all.html#30822">Map</a></td>
<td class="next"><span class="next-1">Next: <a href="30969.html">30969</a></span></td>
</tr>
</table>
<footer>
<div class="release">The complete Contact Sam Cruise RAM disassembly 20190619</div>
<div class="copyright">&#169; 1986 Microsphere Computer Services Ltd. &#169; 2019 Richard Dymond.</div>
<div class="created">Created using <a href="https://skoolkit.ca">SkoolKit</a> 7.2.</div>
<div><a href="../../asm/7866.html">Switch to hexadecimal</a>.</div>
</footer>
</body>
</html>